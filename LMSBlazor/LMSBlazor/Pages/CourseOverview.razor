@page "/courseoverview"
@inject NavigationManager _navigation
@inject AuthenticationService _authentication
@inject LearningModuleService _learningModuleService
@inject CodelabService _codelabService

<h3>CourseOverview</h3>

<p>@Course.CourseName</p>
<ul>
	@foreach (var module in Course.Modules)
	{
		<li>
			@if (module.Edit == false)
			{

				<p>Learningmodule : @module.ModuleName</p>
				<button type="button" @onclick="()=>EditChange(module.LearningModuleId)">Edit</button>
				<button type="button" @onclick="()=>AddModule(module.LearningModuleId)">Add Submodule</button>
				<button type="button" @onclick="()=>AddCodelab(module.LearningModuleId)">Add Codelab</button>
				@* <button type="button" @onclick="()=>DeleteModule(module.LearningModuleId)">Delete</button> *@

			}
			else
			{
				<EditForm Model="@Module" OnSubmit="EditModuleName" FormName="ModuleName@ModuleId" Name="@($"ModuleName{Module.LearningModuleId}")">
					<label>Name</label>
					<InputText @bind-Value=Module.ModuleName>@Module.ModuleName</InputText>
					<button type="submit">Ok</button>
				</EditForm>
			}
		</li>

		if (module.SubModules.Count > 0)
		{
			foreach (var submodules in module.SubModules)
			{
				<ul>
					<li>
						@if (submodules.Edit == false)
						{
							<p>Submodule : @submodules.ModuleName</p>
							<button type="button" @onclick="()=>EditChange(submodules.LearningModuleId)">Edit</button>
							<button type="button" @onclick="()=>AddCodelab(submodules.LearningModuleId)">Add Codelab</button>
							@* <button type="button" @onclick="()=>DeleteModule(submodules.LearningModuleId)">Delete</button> *@
						}
						else
						{
							<EditForm Model="@Module" OnSubmit="EditModuleName" FormName="ModuleName@ModuleId" Name="@($"SubModuleName{Module.LearningModuleId}")">
								<label>Name</label>
								<InputText @bind-Value=Module.ModuleName>@Module.ModuleName</InputText>
								<button type="submit">Ok</button>
							</EditForm>
						}
					</li>
					@foreach (var codelab in submodules.Codelabs)
					{
						<ul>
							<li>
								<p>Codelab : @codelab.Name</p>
								<p>Description : @codelab.Description</p>
								@* <button type="button" @onclick="()=>EditCodelab(codelab.CodelabId)">Edit</button>
								<button type="button" @onclick="()=>DeleteCodelab(codelab.CodelabId)">Delete</button> *@
							</li>
						</ul>
					}
				</ul>
			}
		}
		else
		{
			foreach (var codelab in module.Codelabs)
			{
				<ul>
					<li>
						<p>@codelab.Name</p>
						<p>@codelab.Description</p>
					</li>
				</ul>
			}
		}
	}
</ul>
@if (NewModule != null && NewModule.Edit == true)
{
	<EditForm Model="@NewModule" OnSubmit="CreateModule" FormName="NewModuleName@ModuleId" Name="@($"SubModuleName{Module.LearningModuleId}")">
		<label>Name</label>
		<InputText @bind-Value=NewModule.ModuleName>@NewModule.ModuleName</InputText>
		<button type="submit">Ok</button>
	</EditForm>
}
@if (NewCodelab != null && NewCodelab.Edit == true)
{
	<EditForm Model="@NewCodelab" OnSubmit="CreateCodelab" FormName="NewCodelabName@CodelabId" Name="@($"CodelabName{NewCodelab.Name}")">
		<label>Name</label>
		<InputText @bind-Value=NewCodelab.Name>@NewCodelab.Name</InputText>
		<button type="submit">Ok</button>
	</EditForm>
}


